<html>
<head>
</head>
<body>

<form id="searchSpeakers"></form>

<p id="speakerResults"></p>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script>
    function searchSpeakers(){
        var searchData = {};

        // Get the search parameters
        searchData.id = document.getElementById('id').value;
        searchData.name = document.getElementById('name').value;
        searchData.company_name = document.getElementById('company_name').value;

        jQuery.get("https://n1a.goexposoftware.com/events/sbd/goExpo/api/public/v1/speaker", searchData, function(data){

            // Create a list of results based on our search parameters
            var speakersHtml = "";
            for(var i = 0; i < data.results.length; i++){
                speakersHtml += data.results[i].id + " - " + data.results[i].company_name + " - " + data.results[i].name + "<br />";
            }

            var speakers = document.getElementById('speakerResults');
            speakers.innerHTML = speakersHtml;

            document.body.appendChild(speakers);

        }, 'json');
    }

    // Get all speaker parameters
    jQuery.get("https://n1a.goexposoftware.com/events/sbd/goExpo/api/public/v1/speaker/parameters", function(data){

        // Add a submit button to our form
        var form = document.getElementById('searchSpeakers');
        var submit = document.createElement('input');
        submit.setAttribute('value','Submit');
        submit.setAttribute('type','button');
        submit.setAttribute('onclick','searchSpeakers();');

        // Append these API text fields to the search form
        var textFields = ['id','company_name','name'];

        for(var i = 0; i < textFields.length; i++){
            // Create the textbox container with a label
            var div = document.createElement('div');
            div.innerHTML = "<b>" + data.results[textFields[i]].label + "</b>: ";

            // Create the textbox search fields
            var textField = document.createElement('input');
            textField.setAttribute('type','text');
            textField.setAttribute('minlength',data.results[textFields[i]].min_length);
            textField.setAttribute('maxlength',data.results[textFields[i]].max_length);
            textField.setAttribute('id',textFields[i]);

            div.appendChild(textField);
            form.appendChild(div);
        }

        form.appendChild(submit);

    }, 'json');
</script>
</body>
</html>